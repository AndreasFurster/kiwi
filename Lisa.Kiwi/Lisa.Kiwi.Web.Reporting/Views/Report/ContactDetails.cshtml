@model ContactMetadata
@{
    ViewBag.Title = "Contact details";
}

<div class="center-box">
    <h2>Contactdetails</h2>

    @using (Html.BeginForm("Contactdetails", "Report"))
    {
        // Temporarily with validation summary while we test it
        @Html.ValidationSummary()
        @Html.AntiForgeryToken()


        <div class="form-group">
            <label class="control-label">Als we contact met u op mogen nemen, vul dan hier uw contactgevens in.</label><br />
        </div>

        <div class="form-group">
            <label class="checkbox-inline">
                @Html.CheckBoxFor(c => c.UseName, new { @class = "enabler", data_enabler_for = "Name" })
                Naam
            </label>
            <div class="col-xs-12">
                @Html.TextBoxFor(c => c.Name, true, htmlAttributes: new { @Disabled = "Disabled", @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="checkbox-inline">
                @Html.CheckBoxFor(c => c.UsePhoneNumber, new { @class = "enabler", data_enabler_for = "PhoneNumber" })
                Telefoon
            </label>
            <div class="col-xs-12">
                @Html.TextBoxFor(c => c.PhoneNumber, true, htmlAttributes: new { @Disabled = "Disabled", @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            <label class="checkbox-inline">
                @Html.CheckBoxFor(c => c.UseEmail, new { @class = "enabler", data_enabler_for = "Email" })
                E-mailadres
            </label>
            <div class="col-xs-12">
                @Html.TextBoxFor(c => c.Email, true, htmlAttributes: new { @Disabled = "Disabled", @class = "form-control" })
            </div>
        </div>
        <div class="form-group">
            @Html.Hidden("guid", new { @Value = ViewBag.Guid })
            <input type="submit" value="Afronden" class="btn btn-default btn-report" />
        </div>
    }
</div>

@section scripts {
    <script type="text/javascript">
        function updateEnabler(enabler, target) {
            target.prop('disabled', !enabler.prop('checked'));
        }

        $(document).ready(function () {
            $('input.enabler').each(function () {
                var enabler = $(this);
                var target = $('#' + enabler.data('enabler-for'));

                // Make sure that if it starts checked, we update it
                updateEnabler(enabler, target);

                // Make sure that if it changes value, we update it as well
                enabler.on('change', function () {
                    updateEnabler(enabler, target);
                });
            });
        });
    </script>
}